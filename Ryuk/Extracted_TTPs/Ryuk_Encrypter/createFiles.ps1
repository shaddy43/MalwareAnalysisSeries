$total_size_limit = 200000000
$count = 0

$filetypes = @(".mp4",".pdf",".dmp",".dat",".mp3",".txt",".xlsx",".ps1",".docx",".bat")
$filesizes = @("80000000", "15000000", "250000","12345","323153","3123","1111111","3435560","899876","236511")
$directory_names = @("test","documents","temporary","music","installed")

# Get the current timestamp
$timestamp = Get-Date -Format "yyyyMMdd_HHmmss"

# Append the timestamp to the RyukFiles folder name
$ryukFolderPath = "C:\Users\Public\RyukTesting"
# $timestampFilePath = "C:\users\public\temp_files_timestamp.txt"

# Create RyukFiles folder with timestamp
New-Item -Path $ryukFolderPath -ItemType "directory"

# Save the timestamp to a text file
# $timestamp | Out-File -FilePath $timestampFilePath

for($j=0; $j -le 4; $j++)
{
    $temp_path = $ryukFolderPath + "\" + $directory_names[$j]
    $path_bool = Test-Path -Path $temp_path
    if(!$path_bool)
    {
        New-Item -Path $temp_path -ItemType "directory"
    }
}

for($i=0; $i -lt $total_size_limit; $i++)
{
    $num = Get-Random -Maximum 10
    $num_size = Get-Random -Maximum 10
    $num_directory_name = Get-Random 5
    $count++

    $path = $ryukFolderPath + "\" + $directory_names[$num_directory_name] + "\temp" + $count + "" + $filetypes[$num]
    $size = $filesizes[$num_size]

    fsutil file createnew $path $size
    $i = $i + $size
}
